<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading and Understanding Experience - Digital Accessibility Empathy Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- CONSTANT LAB UI STYLES --- */
        .lab-ui-font { font-family: ui-sans-serif, system-ui, -apple-system, sans-serif !important; }
        .info-panel-container { min-height: 550px !important; display: flex; flex-direction: column; }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ef4444; transition: .4s; border-radius: 28px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #15803d; }
        input:checked + .slider:before { transform: translateX(22px); }
        .tab-btn { font-family: ui-sans-serif, system-ui, sans-serif !important; }
        .tab-btn[aria-selected="true"] { background-color: #111827; color: #60a5fa; border-bottom: 2px solid #60a5fa; }

        /* --- INACCESSIBLE MODE STYLES --- */
        .inaccessible-mode .reading-content { font-family: "Times New Roman", Times, serif !important; }
        .inaccessible-mode .promo-banner { animation: flash 1s step-end infinite; overflow: hidden; }
        @keyframes flash { 50% { background-color: #facc15; } }
        
        .inaccessible-mode .banner-move-img {
            white-space: nowrap;
            animation: slide-banner 4s linear infinite;
        }
        @keyframes slide-banner { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        .inaccessible-mode #txt-instructions {
            text-align: justify;
            line-height: 0.95 !important;
            letter-spacing: -0.04em !important;
            font-size: 14px;
        }
        .inaccessible-mode #txt-instr-title { 
            font-size: 14px !important; 
            margin-bottom: 0px !important; 
            text-transform: none !important; 
            font-weight: normal !important;
            color: #1e3a8a;
        }
        .inaccessible-mode .cog-label { font-size: 12px !important; text-transform: uppercase !important; font-weight: 900 !important; }

        /* --- ACCESSIBLE MODE STYLES --- */
        .accessible-mode .reading-content { font-family: ui-sans-serif, system-ui, sans-serif !important; }
        .accessible-mode .promo-banner { background-color: #1e40af; animation: none; margin-bottom: 24px; }
        .accessible-mode #txt-instr-title { font-weight: bold; text-transform: uppercase; font-size: 1.125rem; margin-bottom: 0.75rem; color: #1e3a8a; }
        .accessible-mode #txt-instructions { text-align: left; line-height: 1.8; font-size: 14px; }
        .accessible-mode .cog-label { font-size: 14px !important; text-transform: none !important; font-weight: 600; letter-spacing: 0.01em; }

        .carousel-btn {
            display: flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; border: 2px solid #1e40af;
            border-radius: 6px; background: white; color: #1e40af;
            transition: all 0.2s; cursor: pointer;
        }
        .carousel-btn:hover { background: #f3f4f6; }

        .input-error { border: 2px solid #ef4444 !important; }
        .error-msg { color: #ef4444; font-size: 12px; font-weight: bold; margin-top: 4px; display: block; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8 transition-colors duration-500 lab-ui-font" id="bodyTag">

    <div class="max-w-7xl mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden">
        <header class="bg-white border-b border-gray-100 lab-ui-font">
            <div class="p-6 flex flex-col md:flex-row justify-between items-center gap-6 border-b border-gray-50">
                <div id="txt-lab-title" class="text-xl md:text-2xl font-black tracking-tight uppercase" style="color: #008B63;">Digital Accessibility Empathy Lab</div>
                <img src="https://regine-lambrecht.github.io/color-contrast-checker-size-weight/images/banner.png" alt="Logo" class="h-12">
            </div>

            <nav class="p-4 flex flex-col gap-4">
                <div class="flex items-center justify-between gap-4 bg-gray-50 p-3 rounded-2xl border border-gray-200 w-full">
                    <div class="flex items-center gap-4">
                        <span id="txt-inaccessible" class="text-xs font-black uppercase tracking-widest text-red-600">Inaccessible</span>
                        <label class="switch">
                            <input type="checkbox" id="modeToggle" onchange="handleModeToggle()" role="switch">
                            <span class="slider"></span>
                        </label>
                        <span id="txt-accessible" class="text-xs font-black uppercase tracking-widest text-green-700">Accessible</span>
                    </div>
                    <div class="flex gap-2 text-[10px] font-bold">
                        <button onclick="setLanguage('en')" class="lang-btn px-2 py-1 rounded" id="btn-en">EN</button>
                        <button onclick="setLanguage('fr')" class="lang-btn px-2 py-1 rounded" id="btn-fr">FR</button>
                        <button onclick="setLanguage('nl')" class="lang-btn px-2 py-1 rounded" id="btn-nl">NL</button>
                        <button onclick="setLanguage('de')" class="lang-btn px-2 py-1 rounded" id="btn-de">DE</button>
                    </div>
                </div>
                <h1 id="txt-title" class="text-xl font-black text-gray-900 px-2 uppercase tracking-tighter">Reading and Understanding Experience</h1>
            </nav>
        </header>

        <main class="p-6 md:p-10">
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-16">
                <div class="lg:col-span-2 reading-content flex flex-col form-gap" id="exercise-column">
                    <div id="form-container" class="contents">
                        <div id="banner-host" class="promo-banner rounded-lg h-[60px] flex items-center justify-center"></div>
                        
                        <div id="vague-error" class="hidden bg-red-100 text-red-700 p-3 rounded-lg text-sm font-bold mt-4" role="alert">Fail to submit form</div>
                        
                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 mt-4 h-[160px] flex flex-col justify-between overflow-hidden">
                            <div>
                                <div class="flex justify-between items-center">
                                    <h2 id="txt-instr-title">Instructions</h2>
                                    <div id="carousel-controls" class="flex gap-2 hidden">
                                        <button onclick="prevSlide()" class="carousel-btn" id="btn-prev">❮</button>
                                        <button onclick="nextSlide()" class="carousel-btn" id="btn-next">❯</button>
                                    </div>
                                </div>
                                <div id="txt-instructions"></div>
                            </div>
                            <div id="slide-indicator" class="text-[11px] font-bold text-[#1e40af] hidden"></div>
                        </div>

                        <div class="space-y-4 mt-6">
                            <div>
                                <label id="txt-label-name" class="cog-label block mb-1">Name</label>
                                <input type="text" id="inp-name" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm lab-ui-font">
                                <span id="err-name" class="error-msg hidden" role="alert"></span>
                            </div>
                            <div>
                                <label id="txt-label-code" class="cog-label block mb-1">CODE</label>
                                <input type="text" id="inp-code" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm lab-ui-font">
                            </div>
                        </div>
                        <button id="txt-btn" onclick="validateForm()" class="w-full bg-blue-600 hover:bg-blue-800 text-white font-bold py-3 px-6 rounded-lg text-sm tracking-wide transition-colors lab-ui-font mt-6">OK</button>
                    </div>
                </div>

                <div class="lg:col-span-3">
                    <div class="info-panel-container bg-gray-900 text-white rounded-2xl shadow-xl overflow-hidden h-full flex flex-col lab-ui-font">
                        <div class="flex bg-gray-800 border-b border-gray-700">
                            <button id="tab-test" onclick="switchTab('test')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest" aria-selected="true">How to test</button>
                            <button id="tab-feedback" onclick="switchTab('feedback')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Issues</button>
                            <button id="tab-user" onclick="switchTab('user')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Impacted users</button>
                        </div>
                        <div id="panel-test" class="p-8 space-y-6 text-sm flex-grow overflow-y-auto">
                            <h3 id="txt-guide-title" class="text-blue-400 font-bold uppercase text-xs mb-2">Step-by-step guide</h3>
                            <ol id="txt-test-steps" class="list-decimal pl-5 space-y-4 opacity-95"></ol>
                        </div>
                        <div id="panel-feedback" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <h3 id="txt-feedback-title" class="text-blue-400 font-bold uppercase mb-6"></h3>
                            <div id="critiqueContent" class="space-y-6"></div>
                        </div>
                        <div id="panel-user" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <div id="txt-user-content" class="leading-relaxed opacity-95 text-sm"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const translations = {
            en: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Digital Accessibility Empathy Lab", title: "Reading and Understanding Experience",
                name: { bad: "IDENTIFIER", good: "Full Name (required)" }, code: { bad: "CODE", good: "Promotional Code" }, 
                btn: { bad: "OK", good: "Submit Application" }, promoPrefix: "APPLY NOW! 50% OFF PROMO CODE:",
                namePlaceholder: "Type your identifier", codePlaceholder: "SZ1ILOQ",
                instrTitle: "Instructions", guideTitle: "Step-by-step guide", prevAria: "Previous slide", nextAria: "Next slide",
                indicator: "Step {x} of {total}", tabTest: "How to test", tabUser: "Impacted users", tabIssues: "Issues", tabRemediations: "Remediations",
                successMsg: "Your request was successfully submitted", failMsg: "Fail to submit form", errReqName: "Full Name is required",
                instrSlidesInacc: [
                    "It is a mandatory requirement that the user facilitates the interaction by meticulously populating the alphanumeric fields with the specific key string visible in the oscillating promotional header.",
                    "Upon successful initial transmission, an automated verification protocol will trigger a secondary correspondence to your registered electronic mail for the purpose of validating the integrity of the data provided.",
                    "To finalize the process, the user is obliged to formally acknowledge the reception of the aforementioned validation notice, ensuring the synchronization of the benefit to the internal database.",
                    "In the event of dissatisfaction, a window of exactly fifteen days is granted for the return of goods, provided that all evidentiary documentation is presented in accordance with our extensive policy."
                ],
                instrSlidesAcc: [
                    "Step 1: Fill in the form using the promo code shown in the banner above.",
                    "Step 2: Check your email for a confirmation message we will send you automatically.",
                    "Step 3: Click the link in that email to confirm your details and activate your discount.",
                    "Step 4: You have 15 days to return the product if you are not happy with your purchase."
                ],
                testSteps: [
                    "Read the 'Instructions' block and identify the required pieces of information.",
                    "Look for the promotional code in the banner.",
                    "Try to complete the form without entering any data to see how the system handles errors.",
                    "Complete the form using the found information.",
                    "Switch to the accessible version and compare clarity."
                ],
                critiques: {
                    bad: { title: "What is wrong?", items: [
                        { f: "Moving Content", c: "The flashing, scrolling banner and auto-sliding instructions create a distraction that makes it hard to focus on reading." },
                        { f: "Uncontrolled Carousel", c: "The instructions change automatically without giving enough time to read, and there is no way to stop or go back manually." },
                        { f: "Unreadable Formatting", c: "The banner uses protected styles that prevent user adjustments. Overuse of bolding on non-essential words and tight justified text creates a 'wall of text' that is hard to scan." },
                        { f: "Confusing Labels", c: "The label 'IDENTIFIER' in all caps is hard to read, and redundant jargon placeholders make it difficult to understand exactly what information is needed." },
                        { f: "Poor Feedback", c: "The generic error message doesn't specify which field is wrong, and the form resets silently upon success." }
                    ]},
                    good: { title: "Remediations", items: [
                        { f: "Static & Controlled Content", c: "Ensure promotional content is static. Allow users to navigate instructions at their own pace with manual buttons and a progress indicator." },
                        { f: "Standard Text & Spacing", c: "Use real text instead of images. Provide generous line spacing and only use bolding for actual key terms to help with scanning." },
                        { f: "Descriptive Labels", c: "Use clear labels like 'Full Name' and remove confusing placeholder text to reduce the effort needed to understand the form." },
                        { f: "Clear Error Guidance", c: "Point specifically to the field that needs fixing and provide a permanent success message when the task is complete." }
                    ]}
                },
                userTitle: "Who is impacted?", userList: [
                    "**ADHD / Autism:** Moving parts and inconsistent bolding act as significant distractions, making it very difficult to stay on task.",
                    "**Dyslexia:** Tight spacing and fonts that make similar letters look identical create severe reading barriers for these users.",
                    "**Deaf people:** Some people who use sign language as their primary language may have a different vocabulary in written text, making complex instructions much harder to process.",
                    "**Cognitive Impairment:** Fast-moving carousels and vague labels cause frustration when people cannot process the information in time."
                ]
            },
            fr: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Laboratoire d'empathie sur l'accessibilité numérique", title: "Expérience de lecture et compréhension",
                name: { bad: "IDENTIFIANT", good: "Nom complet (requis)" }, code: { bad: "CODE", good: "Code promotionnel" }, 
                btn: { bad: "OK", good: "Soumettre ma demande" }, promoPrefix: "POSTULEZ ! -50% CODE :",
                namePlaceholder: "Saisissez votre identifiant", codePlaceholder: "SZ1ILOQ",
                instrTitle: "Instructions", guideTitle: "Guide étape par étape", prevAria: "Diapositive précédente", nextAria: "Diapositive suivante",
                indicator: "Étape {x} sur {total}", tabTest: "Comment tester", tabUser: "Utilisateurs impactés", tabIssues: "Problèmes", tabRemediations: "Corrections",
                successMsg: "Votre demande a été soumise avec succès", failMsg: "Échec de l'envoi du formulaire", errReqName: "Le nom complet est requis",
                instrSlidesInacc: [
                    "Il est impératif que l'utilisateur facilite l'interaction en saisissant méticuleusement les séquences alphanumériques visibles dans l'en-tête promotionnel oscillant.",
                    "Après la transmission initiale, un protocole de vérification déclenchera une correspondance secondaire vers votre courrier électronique pour valider l'intégrité des données fournies.",
                    "L'utilisateur est obligé d'accuser formellement réception de ladite notice de validation pour assurer la synchronisation de l'avantage dans la base de données interne.",
                    "En cas d'insatisfaction, un délai de quinze jours est accordé pour le retour des marchandises, sous réserve de présentation de toute la documentation requise."
                ],
                instrSlidesAcc: [
                    "Étape 1 : Remplissez le formulaire avec le code promo affiché dans la bannière ci-dessus.",
                    "Étape 2 : Un e-mail de confirmation vous sera envoyé automatiquement.",
                    "Étape 3 : Cliquez sur le lien dans cet e-mail pour confirmer vos coordonnées et activer votre remise.",
                    "Étape 4 : Vous avez 15 jours pour retourner le produit si vous n'êtes pas satisfait de votre achat."
                ],
                testSteps: [
                    "Read the 'Instructions' block and identify the required pieces of information.",
                    "Look for the promotional code in the banner.",
                    "Try to complete the form without entering any data to see how the system handles errors.",
                    "Complete the form using the found information.",
                    "Switch to the accessible version and compare clarity."
                ],
                critiques: {
                    bad: { title: "Quel est le problème ?", items: [
                        { f: "Moving Content", c: "The flashing, scrolling banner and auto-sliding instructions create a distraction that makes it hard to focus on reading." },
                        { f: "Uncontrolled Carousel", c: "The instructions change automatically without giving enough time to read, and there is no way to stop or go back manually." },
                        { f: "Unreadable Formatting", c: "The banner uses protected styles that prevent user adjustments. Overuse of bolding on non-essential words and tight justified text creates a 'wall of text' that is hard to scan." },
                        { f: "Confusing Labels", c: "The label 'IDENTIFIER' in all caps is hard to read, and redundant jargon placeholders make it difficult to understand exactly what information is needed." },
                        { f: "Poor Feedback", c: "The generic error message doesn't specify which field is wrong, and the form resets silently upon success." }
                    ]},
                    good: { title: "Remediations", items: [
                        { f: "Static & Controlled Content", c: "Ensure promotional content is static. Allow users to navigate instructions at their own pace with manual buttons and a progress indicator." },
                        { f: "Standard Text & Spacing", c: "Use real text instead of images. Provide generous line spacing and only use bolding for actual key terms to help with scanning." },
                        { f: "Descriptive Labels", c: "Use clear labels like 'Full Name' and remove confusing placeholder text to reduce the effort needed to understand the form." },
                        { f: "Clear Error Guidance", c: "Point specifically to the field that needs fixing and provide a permanent success message when the task is complete." }
                    ]}
                },
                userTitle: "Qui est impacté ?", userList: [
                    "**ADHD / Autism:** Moving parts and inconsistent bolding act as significant distractions, making it very difficult to stay on task.",
                    "**Dyslexia:** Tight spacing and fonts that make similar letters look identical create severe reading barriers for these users.",
                    "**Deaf people:** Some people who use sign language as their primary language may have a different vocabulary in written text, making complex instructions much harder to process.",
                    "**Cognitive Impairment:** Fast-moving carousels and vague labels cause frustration when people cannot process the information in time."
                ]
            },
            nl: {
                inaccessible: "Niet Toegankelijk", accessible: "Toegankelijk", labTitle: "Digital Accessibility Empathy Lab", title: "Ervaring in lezen en begrijpen",
                name: { bad: "IDENTIFICATIE", good: "Volledige Naam (verplicht)" }, code: { bad: "CODE", good: "Promotiecode" }, 
                btn: { bad: "OK", good: "Aanvraag Verzenden" }, promoPrefix: "NU AANMELDEN! 50% KORTING:",
                namePlaceholder: "Typ uw identificatie", codePlaceholder: "SZ1ILOQ",
                instrTitle: "Instructions", guideTitle: "Stappenplan", prevAria: "Vorige dia", nextAria: "Volgende dia",
                indicator: "Stap {x} van {total}", tabTest: "Hoe te testen", tabUser: "Impact op gebruikers", tabIssues: "Problemen", tabRemediations: "Oplossingen",
                successMsg: "Uw aanvraag is succesvol verzonden", failMsg: "Formulier verzenden mislukt", errReqName: "Volledige naam is verplicht",
                instrSlidesInacc: [
                    "Het is een dwingende vereiste dat de gebruiker de interactie faciliteert door nauwgezet de alfanumerieke velden in te vullen met de specifieke reeks in de bewegende banner.",
                    "Na de eerste verzending zal een geautomatiseerd verificatieprotocol een tweede bericht sturen naar uw geregistreerde e-mailadres om de integriteit van de verstrekte gegevens te valideren.",
                    "Om het proces te voltooien is de gebruiker verplicht de ontvangst van het verificatiebericht formeel te bevestigen om het voordeel in de interne database te activeren.",
                    "In geval van ontevredenheid wordt een termijn van precies vijftien dagen verleend voor het retourneren van goederen, mits alle bewijsstukken aanwezig zijn conform onze regels."
                ],
                instrSlidesAcc: [
                    "Stap 1: Vul het formulier in met de promotiecode die in de banner hierboven staat.",
                    "Stap 2: Je ontvangt automatisch een bevestigingsmail van ons.",
                    "Stap 3: Klik op de link in die e-mail om je gegevens te bevestigen en je korting te activeren.",
                    "Stap 4: Je hebt 15 dagen de tijd om het product te retourneren als je niet tevreden bent met je aankoop."
                ],
                testSteps: [
                    "Read the 'Instructions' block and identify the required pieces of information.",
                    "Look for the promotional code in the banner.",
                    "Try to complete the form without entering any data to see how the system handles errors.",
                    "Complete the form using the found information.",
                    "Switch to the accessible version and compare clarity."
                ],
                critiques: {
                    bad: { title: "Wat is er mis?", items: [
                        { f: "Moving Content", c: "The flashing, scrolling banner and auto-sliding instructions create a distraction that makes it hard to focus on reading." },
                        { f: "Uncontrolled Carousel", c: "The instructions change automatically without giving enough time to read, and there is no way to stop or go back manually." },
                        { f: "Unreadable Formatting", c: "The banner uses protected styles that prevent user adjustments. Overuse of bolding on non-essential words and tight justified text creates a 'wall of text' that is hard to scan." },
                        { f: "Confusing Labels", c: "The label 'IDENTIFIER' in all caps is hard to read, and redundant jargon placeholders make it difficult to understand exactly what information is needed." },
                        { f: "Poor Feedback", c: "The generic error message doesn't specify which field is wrong, and the form resets silently upon success." }
                    ]},
                    good: { title: "Oplossingen", items: [
                        { f: "Static & Controlled Content", c: "Ensure promotional content is static. Allow users to navigate instructions at their own pace with manual buttons and a progress indicator." },
                        { f: "Standard Text & Spacing", c: "Use real text instead of images. Provide generous line spacing and only use bolding for actual key terms to help with scanning." },
                        { f: "Descriptive Labels", c: "Use clear labels like 'Full Name' and remove confusing placeholder text to reduce the effort needed to understand the form." },
                        { f: "Clear Error Guidance", c: "Point specifically to the field that needs fixing and provide a permanent success message when the task is complete." }
                    ]}
                },
                userTitle: "Wie wordt beïnvloed?", userList: [
                    "**ADHD / Autisme:** Moving parts and inconsistent bolding act as significant distractions, making it very difficult to stay on task.",
                    "**Dyslexia:** Tight spacing and fonts that make similar letters look identical create severe reading barriers for these users.",
                    "**Deaf people:** Some people who use sign language as their primary language may have a different vocabulary in written text, making complex instructions much harder to process.",
                    "**Cognitive Impairment:** Fast-moving carousels and vague labels cause frustration when people cannot process the information in time."
                ]
            },
            de: {
                inaccessible: "Nicht Barrierefrei", accessible: "Barrierefrei", labTitle: "Digitales Barrierefreiheits-Empathie-Labor", title: "Lese- und Verständnis-Erfahrung",
                name: { bad: "IDENTIFIKATOR", good: "Vollständiger Name (erforderlich)" }, code: { bad: "CODE", good: "Aktionscode" }, 
                btn: { bad: "OK", good: "Antrag Absenden" }, promoPrefix: "JETZT BEWERBEN! 50% RABATT:",
                namePlaceholder: "Geben Sie Ihren Identifikator ein", codePlaceholder: "SZ1ILOQ",
                instrTitle: "Anleitung", guideTitle: "Schritt-für-Schritt-Anleitung", prevAria: "Vorherige Folie", nextAria: "Nächste Folie",
                indicator: "Schritt {x} von {total}", tabTest: "Wie man testet", tabUser: "Betroffene Nutzer", tabIssues: "Probleme", tabRemediations: "Lösungen",
                successMsg: "Ihr Antrag wurde erfolgreich übermittelt", failMsg: "Senden fehlgeschlagen", errReqName: "Vollständiger Name ist erforderlich",
                instrSlidesInacc: [
                    "Es ist zwingend erforderlich, dass der Nutzer die Interaktion erleichtert, indem er akribisch die alphanumerischen Felder mit der Sequenz aus dem oszillierenden Header füllt.",
                    "Nach der ersten Übermittlung wird ein automatisiertes Verifizierungsprotokoll eine Nachricht an Ihre E-Mail senden, um die Integrität der bereitgestellten Daten zu validieren.",
                    "Um den Prozess abzuschließen, ist der Nutzer verpflichtet, den Empfang der Validierungsnachricht förmlich zu bestätigen, um den Vorteil in der Datenbank zu aktivieren.",
                    "Im Falle von Unzufriedenheit wird eine Frist von genau fünfzehn Tagen für die Rückgabe gewährt, sofern alle Belege gemäß unserer umfangreichen Richtlinien vorliegen."
                ],
                instrSlidesAcc: [
                    "Schritt 1: Füllen Sie das Formular mit dem Aktionscode aus der obigen Anzeige aus.",
                    "Schritt 2: Wir senden Ihnen automatisch eine Bestätigungs-E-Mail zu.",
                    "Schritt 3: Klicken Sie auf den Link in dieser E-Mail, um Ihre Daten zu bestätigen und den Rabatt zu aktivieren.",
                    "Schritt 4: Sie haben 15 Tage Zeit, das Produkt zurückzugeben, wenn Sie mit Ihrem Kauf nicht zufrieden sind."
                ],
                testSteps: [
                    "Read the 'Instructions' block and identify the required pieces of information.",
                    "Look for the promotional code in the banner.",
                    "Try to complete the form without entering any data to see how the system handles errors.",
                    "Complete the form using the found information.",
                    "Switch to the accessible version and compare clarity."
                ],
                critiques: {
                    bad: { title: "Was ist falsch?", items: [
                        { f: "Moving Content", c: "The flashing, scrolling banner and auto-sliding instructions create a distraction that makes it hard to focus on reading." },
                        { f: "Uncontrolled Carousel", c: "The instructions change automatically without giving enough time to read, and there is no way to stop or go back manually." },
                        { f: "Unreadable Formatting", c: "The banner uses protected styles that prevent user adjustments. Overuse of bolding on non-essential words and tight justified text creates a 'wall of text' that is hard to scan." },
                        { f: "Confusing Labels", c: "The label 'IDENTIFIER' in all caps is hard to read, and redundant jargon placeholders make it difficult to understand exactly what information is needed." },
                        { f: "Poor Feedback", c: "The generic error message doesn't specify which field is wrong, and the form resets silently upon success." }
                    ]},
                    good: { title: "Remediations", items: [
                        { f: "Static & Controlled Content", c: "Ensure promotional content is static. Allow users to navigate instructions at their own pace with manual buttons and a progress indicator." },
                        { f: "Standard Text & Spacing", c: "Use real text instead of images. Provide generous line spacing and only use bolding for actual key terms to help with scanning." },
                        { f: "Descriptive Labels", c: "Use clear labels like 'Full Name' and remove confusing placeholder text to reduce the effort needed to understand the form." },
                        { f: "Clear Error Guidance", c: "Point specifically to the field that needs fixing and provide a permanent success message when the task is complete." }
                    ]}
                },
                userTitle: "Wer ist betroffen?", userList: [
                    "**ADHD / Autism:** Moving parts and inconsistent bolding act as significant distractions, making it very difficult to stay on task.",
                    "**Dyslexia:** Tight spacing and fonts that make similar letters look identical create severe reading barriers for these users.",
                    "**Deaf people:** Some people who use sign language as their primary language may have a different vocabulary in written text, making complex instructions much harder to process.",
                    "**Cognitive Impairment:** Fast-moving carousels and vage labels cause frustration when people cannot process the information in time."
                ]
            }
        };

        let currentLang = 'en';
        let currentSlide = 0;
        let carouselInterval = null;

        function updateCarousel() {
            const isAcc = document.getElementById('modeToggle').checked;
            const t = translations[currentLang];
            const display = document.getElementById('txt-instructions');
            const indicator = document.getElementById('slide-indicator');
            
            const slides = isAcc ? t.instrSlidesAcc : t.instrSlidesInacc;
            let content = slides[currentSlide];

            if (!isAcc) {
                const words = content.split(' ');
                content = words.map((w, i) => i % 3 === 0 ? `<b>${w}</b>` : w).join(' ');
                indicator.classList.add('hidden');
            } else {
                indicator.innerText = t.indicator.replace('{x}', currentSlide + 1).replace('{total}', slides.length);
                indicator.classList.remove('hidden');
            }
            display.innerHTML = content;
        }

        function nextSlide() {
            const isAcc = document.getElementById('modeToggle').checked;
            const slides = isAcc ? translations[currentLang].instrSlidesAcc : translations[currentLang].instrSlidesInacc;
            currentSlide = (currentSlide + 1) % slides.length;
            updateCarousel();
        }

        function prevSlide() {
            const isAcc = document.getElementById('modeToggle').checked;
            const slides = isAcc ? translations[currentLang].instrSlidesAcc : translations[currentLang].instrSlidesInacc;
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            updateCarousel();
        }

        function setBanner(isAcc) {
            const host = document.getElementById('banner-host');
            const t = translations[currentLang];
            host.innerHTML = ''; 
            
            if (!isAcc) {
                const shadow = host.attachShadow({mode: 'closed'});
                const style = document.createElement('style');
                style.textContent = `
                    .content {
                        font-family: serif; font-style: italic; font-weight: 900;
                        color: white; white-space: nowrap; font-size: 1.1rem;
                        letter-spacing: -0.05em !important; word-spacing: -0.1em !important;
                        display: inline-block; animation: slide 4s linear infinite;
                    }
                    @keyframes slide { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
                `;
                const wrapper = document.createElement('div');
                wrapper.className = 'content';
                wrapper.textContent = `${t.promoPrefix} S5bd1L`;
                shadow.appendChild(style);
                shadow.appendChild(wrapper);
            } else {
                host.innerHTML = `
                    <div class="promo-text flex items-center gap-2">
                        <span id="txt-promo-prefix" style="color: white; font-weight: 900;">${t.promoPrefix}</span>
                        <span id="promo-code-container" style="color: white; font-weight: 900; font-size: 1.25rem;">REDUCE 2026</span>
                    </div>`;
            }
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang] || translations['en'];
            const isAcc = document.getElementById('modeToggle').checked;
            document.documentElement.lang = lang;

            document.getElementById('txt-lab-title').innerText = t.labTitle;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-inaccessible').innerText = t.inaccessible;
            document.getElementById('txt-accessible').innerText = t.accessible;
            document.getElementById('txt-label-name').innerText = isAcc ? t.name.good : t.name.bad;
            document.getElementById('txt-label-code').innerText = isAcc ? t.code.good : t.code.bad;
            document.getElementById('txt-btn').innerText = isAcc ? t.btn.good : t.btn.bad;
            document.getElementById('vague-error').innerText = t.failMsg;
            document.getElementById('txt-instr-title').innerText = t.instrTitle;
            document.getElementById('txt-guide-title').innerText = t.guideTitle;
            document.getElementById('txt-test-steps').innerHTML = (t.testSteps || []).map(s => `<li>${s}</li>`).join('');
            document.getElementById('tab-test').innerText = t.tabTest;
            document.getElementById('tab-user').innerText = t.tabUser;
            document.getElementById('tab-feedback').innerText = isAcc ? t.tabRemediations : t.tabIssues;

            const inpName = document.getElementById('inp-name');
            const inpCode = document.getElementById('inp-code');
            inpName.placeholder = !isAcc ? t.namePlaceholder : "";
            inpCode.placeholder = !isAcc ? t.codePlaceholder : "";

            document.getElementById('txt-user-content').innerHTML = `
                <h3 class="text-blue-400 font-bold uppercase mb-4 text-xs">${t.userTitle}</h3>
                <ul class="list-disc pl-5 space-y-3">${(t.userList||[]).map(li => `<li>${li.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')}</li>`).join('')}</ul>
            `;

            updateMode();
            
            document.querySelectorAll('.lang-btn').forEach(b => {
                b.classList.remove('bg-blue-600', 'text-white', 'bg-gray-200', 'text-gray-700');
                if (b.id === 'btn-' + lang) b.classList.add('bg-blue-600', 'text-white');
                else b.classList.add('bg-gray-200', 'text-gray-700');
            });
        }

        function validateForm() {
            const isAcc = document.getElementById('modeToggle').checked;
            const nameVal = document.getElementById('inp-name').value.trim();
            const codeVal = document.getElementById('inp-code').value.trim();
            const t = translations[currentLang];
            document.getElementById('vague-error').classList.add('hidden');
            document.getElementById('inp-name').classList.remove('input-error');
            document.getElementById('err-name').classList.add('hidden');

            if (isAcc) {
                if (!nameVal) {
                    document.getElementById('inp-name').classList.add('input-error');
                    document.getElementById('err-name').innerText = t.errReqName;
                    document.getElementById('err-name').classList.remove('hidden');
                    return;
                }
                document.getElementById('form-container').innerHTML = `<div class="bg-green-100 text-green-800 p-8 rounded-2xl border-2 border-green-200 text-center font-bold text-lg" role="status">${t.successMsg}</div>`;
            } else {
                if (!nameVal || codeVal !== 'S5bd1L') {
                    document.getElementById('vague-error').classList.remove('hidden');
                } else {
                    document.getElementById('inp-name').value = '';
                    document.getElementById('inp-code').value = '';
                }
            }
        }

        function handleModeToggle() {
            currentSlide = 0; 
            const isAcc = document.getElementById('modeToggle').checked;
            const body = document.getElementById('bodyTag');
            
            // Immediate style forcing
            if (isAcc) {
                body.classList.remove('inaccessible-mode');
                body.classList.add('accessible-mode');
            } else {
                body.classList.remove('accessible-mode');
                body.classList.add('inaccessible-mode');
            }
            
            setLanguage(currentLang);
        }

        function updateMode() {
            const isAcc = document.getElementById('modeToggle').checked;
            const t = translations[currentLang] || translations['en'];
            const crit = isAcc ? t.critiques.good : t.critiques.bad;
            
            clearInterval(carouselInterval);
            if (!isAcc) {
                carouselInterval = setInterval(nextSlide, 3000); 
                document.getElementById('carousel-controls').classList.add('hidden');
            } else {
                document.getElementById('carousel-controls').classList.remove('hidden');
            }

            setBanner(isAcc);

            document.getElementById('txt-feedback-title').innerText = crit.title;
            document.getElementById('critiqueContent').innerHTML = (crit.items || []).map(i => `<div><span class="text-blue-400 font-bold block mb-1 uppercase text-[11px]">${i.f}</span><p class="text-white opacity-90">${i.c}</p></div>`).join('');
            updateCarousel();
        }

        function switchTab(tabId) {
            ['test', 'feedback', 'user'].forEach(id => {
                document.getElementById('panel-' + id).classList.toggle('hidden', id !== tabId);
                document.getElementById('tab-' + id).setAttribute('aria-selected', id === tabId);
            });
        }

        setLanguage('en');
        switchTab('test');
    </script>
</body>
</html>
