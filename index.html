<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading and Understanding Experience - Digital Accessibility Empathy Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- CONSTANT LAB UI STYLES --- */
        .lab-ui-font { font-family: ui-sans-serif, system-ui, -apple-system, sans-serif !important; }
        .info-panel-container { min-height: 550px !important; display: flex; flex-direction: column; }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ef4444; transition: .4s; border-radius: 28px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #15803d; }
        input:checked + .slider:before { transform: translateX(22px); }
        .tab-btn { font-family: ui-sans-serif, system-ui, sans-serif !important; }
        .tab-btn[aria-selected="true"] { background-color: #111827; color: #60a5fa; border-bottom: 2px solid #60a5fa; }

        /* --- INACCESSIBLE MODE: FLASHING & MOVING BANNER --- */
        .inaccessible-mode .promo-banner { 
            animation: flash 1s step-end infinite; 
            overflow: hidden;
            position: relative;
        }
        .inaccessible-mode .promo-text-img {
            white-space: nowrap;
            animation: slide-banner 4s linear infinite;
            height: 40px;
        }
        @keyframes slide-banner { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        @keyframes flash { 50% { background-color: #facc15; } }

        /* --- INACCESSIBLE INSTRUCTIONS (Wall of Text style) --- */
        .inaccessible-mode #txt-instructions {
            text-align: justify;
            line-height: 0.95 !important;
            letter-spacing: -0.04em !important;
            font-size: 14px;
            display: block;
        }

        /* --- ACCESSIBLE MODE --- */
        .accessible-mode .promo-banner { background-color: #1e40af; animation: none; margin-bottom: 24px; }
        .accessible-mode #txt-instructions { text-align: left; line-height: 1.8; font-size: 14px; }

        .carousel-btn {
            display: flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; border: 2px solid #1e40af;
            border-radius: 6px; background: white; color: #1e40af;
            transition: all 0.2s; cursor: pointer;
        }
        .carousel-btn:hover { background: #f3f4f6; }

        .input-error { border: 2px solid #ef4444 !important; }
        .error-msg { color: #ef4444; font-size: 12px; font-weight: bold; margin-top: 4px; display: block; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8 transition-colors duration-500 lab-ui-font" id="bodyTag">

    <div class="max-w-7xl mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden">
        <header class="bg-white border-b border-gray-100 lab-ui-font">
            <div class="p-6 flex flex-col md:flex-row justify-between items-center gap-6 border-b border-gray-50">
                <div id="txt-lab-title" class="text-xl md:text-2xl font-black tracking-tight uppercase" style="color: #008B63;">Digital Accessibility Empathy Lab</div>
                <img src="https://regine-lambrecht.github.io/color-contrast-checker-size-weight/images/banner.png" alt="Logo" class="h-12">
            </div>

            <nav class="p-4 flex flex-col gap-4">
                <div class="flex items-center justify-between gap-4 bg-gray-50 p-3 rounded-2xl border border-gray-200 w-full">
                    <div class="flex items-center gap-4">
                        <span id="txt-inaccessible" class="text-xs font-black uppercase tracking-widest text-red-600">Inaccessible</span>
                        <label class="switch">
                            <input type="checkbox" id="modeToggle" onchange="handleModeToggle()" role="switch">
                            <span class="slider"></span>
                        </label>
                        <span id="txt-accessible" class="text-xs font-black uppercase tracking-widest text-green-700">Accessible</span>
                    </div>
                    <div class="flex gap-2 text-[10px] font-bold">
                        <button onclick="setLanguage('en')" class="lang-btn px-2 py-1 rounded" id="btn-en">EN</button>
                        <button onclick="setLanguage('fr')" class="lang-btn px-2 py-1 rounded" id="btn-fr">FR</button>
                        <button onclick="setLanguage('nl')" class="lang-btn px-2 py-1 rounded" id="btn-nl">NL</button>
                        <button onclick="setLanguage('de')" class="lang-btn px-2 py-1 rounded" id="btn-de">DE</button>
                    </div>
                </div>
                <h1 id="txt-title" class="text-xl font-black text-gray-900 px-2 uppercase tracking-tighter">Reading and Understanding Experience</h1>
            </nav>
        </header>

        <main class="p-6 md:p-10">
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-16">
                <div class="lg:col-span-2 reading-content flex flex-col form-gap" id="exercise-column">
                    <div id="form-container" class="contents">
                        <div class="promo-banner rounded-lg h-[60px] flex items-center justify-center" id="banner"></div>
                        
                        <div id="vague-error" class="hidden bg-red-100 text-red-700 p-3 rounded-lg text-sm font-bold mt-4" role="alert">Fail to submit form</div>
                        
                        <div class="bg-blue-50 p-5 rounded-xl border border-blue-100 mt-4">
                            <div class="flex justify-between items-center mb-3">
                                <h2 id="txt-instr-title" class="font-bold uppercase text-lg text-blue-900 lab-ui-font">Instructions</h2>
                                <div id="carousel-controls" class="flex gap-2 hidden">
                                    <button onclick="prevSlide()" class="carousel-btn" id="btn-prev">❮</button>
                                    <button onclick="nextSlide()" class="carousel-btn" id="btn-next">❯</button>
                                </div>
                            </div>
                            <div id="txt-instructions" class="min-h-[120px]"></div>
                            <div id="slide-indicator" class="text-[10px] font-bold text-blue-400 mt-2 hidden"></div>
                        </div>

                        <div class="space-y-4 mt-6">
                            <div>
                                <label id="txt-label-name" class="cog-label block mb-1">Name</label>
                                <input type="text" id="inp-name" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm lab-ui-font">
                                <span id="err-name" class="error-msg hidden" role="alert"></span>
                            </div>
                            <div>
                                <label id="txt-label-code" class="cog-label block mb-1">CODE</label>
                                <input type="text" id="inp-code" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm lab-ui-font">
                            </div>
                        </div>
                        <button id="txt-btn" onclick="validateForm()" class="w-full bg-blue-600 hover:bg-blue-800 text-white font-bold py-3 px-6 rounded-lg text-sm tracking-wide transition-colors lab-ui-font mt-6">OK</button>
                    </div>
                </div>

                <div class="lg:col-span-3">
                    <div class="info-panel-container bg-gray-900 text-white rounded-2xl shadow-xl overflow-hidden h-full flex flex-col lab-ui-font">
                        <div class="flex bg-gray-800 border-b border-gray-700">
                            <button id="tab-test" onclick="switchTab('test')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest" aria-selected="true">How to test</button>
                            <button id="tab-feedback" onclick="switchTab('feedback')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Issues</button>
                            <button id="tab-user" onclick="switchTab('user')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Impacted users</button>
                        </div>
                        <div id="panel-test" class="p-8 space-y-6 text-sm flex-grow overflow-y-auto">
                            <h3 id="txt-guide-title" class="text-blue-400 font-bold uppercase text-xs mb-2">Step-by-step guide</h3>
                            <ol id="txt-test-steps" class="list-decimal pl-5 space-y-4 opacity-95"></ol>
                        </div>
                        <div id="panel-feedback" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <h3 id="txt-feedback-title" class="text-blue-400 font-bold uppercase mb-6"></h3>
                            <div id="critiqueContent" class="space-y-6"></div>
                        </div>
                        <div id="panel-user" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <div id="txt-user-content" class="leading-relaxed opacity-95 text-sm"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const translations = {
            en: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Digital Accessibility Empathy Lab", title: "Reading and Understanding Experience",
                name: { bad: "Identifier", good: "Full Name (required)" }, code: { bad: "CODE", good: "Promotional Code" }, 
                btn: { bad: "OK", good: "Submit Application" }, promoPrefix: "APPLY NOW! 50% OFF PROMO CODE:",
                namePlaceholder: "Type your identifier", codePlaceholder: "S5bd1L",
                instrTitle: "Instructions", guideTitle: "Step-by-step guide", prevAria: "Previous slide", nextAria: "Next slide",
                indicator: "Slide {x} of {total}", tabTest: "How to test", tabUser: "Impacted users", tabIssues: "Issues", tabRemediations: "Remediations",
                successMsg: "Your request was successfully submitted", failMsg: "Fail to submit form", errReqName: "Full Name is required",
                instrSlides: [
                    "Step 1: Fill in the form using the unique alphanumeric sequence provided in the banner.",
                    "Step 2: You will receive an automated e-mail message requesting an immediate confirmation of the data.",
                    "Step 3: You must acknowledge the electronic reception of said message to activate the benefit.",
                    "Step 4: You can return the product if you are not fully satisfied within a 15-day window."
                ],
                testSteps: [
                    "Read the 'Instructions' block and identify the required pieces of information.",
                    "Look for the promotional code in the banner.",
                    "Try to complete the form without entering any data to see how the system handles errors.",
                    "Complete the form using the found information.",
                    "Switch to the accessible version and compare clarity."
                ],
                critiques: {
                    bad: { title: "What is wrong?", items: [
                        { f: "Moving Content", c: "The flashing, scrolling banner and auto-sliding instructions create a distraction that makes it hard to focus on reading." },
                        { f: "Uncontrolled Carousel", c: "The instructions change automatically without giving enough time to read, and there is no way to stop or go back manually." },
                        { f: "Unreadable Formatting", c: "The banner uses an image of text which prevents resizing. Overuse of bolding on non-essential words and tight justified text creates a 'wall of text' that is hard to scan." },
                        { f: "Confusing Labels", c: "The label 'Identifier' is vague, and redundant jargon placeholders make it difficult to understand exactly what information is needed." },
                        { f: "Poor Feedback", c: "The generic error message doesn't specify which field is wrong, and the form resets silently upon success." }
                    ]},
                    good: { title: "Remediations", items: [
                        { f: "Static & Controlled Content", c: "Ensure promotional content is static. Allow users to navigate instructions at their own pace with manual buttons and a progress indicator." },
                        { f: "Standard Text & Spacing", c: "Use real text instead of images. Provide generous line spacing and only use bolding for actual key terms to help with scanning." },
                        { f: "Descriptive Labels", c: "Use clear labels like 'Full Name' and remove distracting placeholder text to reduce the effort needed to understand the form." },
                        { f: "Clear Error Guidance", c: "Point specifically to the field that needs fixing and provide a permanent success message when the task is complete." }
                    ]}
                },
                userTitle: "Who is impacted?", userList: [
                    "**ADHD / Autism:** Moving parts and inconsistent bolding act as significant distractions, making it very difficult to stay on task.",
                    "**Dyslexia:** Tight spacing and fonts that make similar letters look identical create severe reading barriers for these users.",
                    "**Deaf people:** Some people who use sign language as their primary language may have a different vocabulary in written text, making complex instructions much harder to process.",
                    "**Cognitive Impairment:** Fast-moving carousels and vague labels cause frustration when people cannot process the information in time."
                ]
            },
            fr: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Laboratoire d'empathie sur l'accessibilité numérique", title: "Expérience de lecture et compréhension",
                name: { bad: "Identifiant", good: "Nom complet (requis)" }, code: { bad: "CODE", good: "Code promotionnel" }, 
                btn: { bad: "OK", good: "Soumettre ma demande" }, promoPrefix: "POSTULEZ ! -50% CODE :",
                namePlaceholder: "Saisissez votre identifiant", codePlaceholder: "S5bd1L",
                instrTitle: "Instructions", guideTitle: "Guide étape par étape", prevAria: "Diapositive précédente", nextAria: "Diapositive suivante",
                indicator: "Diapositive {x} sur {total}", tabTest: "Comment tester", tabUser: "Utilisateurs impactés", tabIssues: "Problèmes", tabRemediations: "Corrections",
                successMsg: "Votre demande a été soumise avec succès", failMsg: "Échec de l'envoi du formulaire", errReqName: "Le nom complet est requis",
                instrSlides: [
                    "Étape 1 : Remplissez le formulaire en utilisant la séquence alphanumérique unique fournie dans la bannière.",
                    "Étape 2 : Vous recevrez un message électronique automatisé demandant une confirmation immédiate des données.",
                    "Étape 3 : Vous devez accuser réception électronique dudit message pour activer l'avantage.",
                    "Étape 4 : Vous pouvez retourner le produit si vous n'êtes pas entièrement satisfait dans un délai de 15 jours."
                ],
                testSteps: ["Lisez les instructions.", "Cherchez le code.", "Testez les erreurs.", "Remplissez le formulaire.", "Comparez les modes."],
                critiques: {
                    bad: { title: "Quel est le problème ?", items: [
                        { f: "Contenu en mouvement", c: "La bannière défilante et clignotante ainsi que les instructions automatiques créent une distraction qui empêche de se concentrer sur la lecture." },
                        { f: "Carrousel non contrôlé", c: "Les instructions changent automatiquement sans laisser assez de temps pour lire, et il n'y a aucun moyen de s'arrêter ou de revenir en arrière." },
                        { f: "Mise en forme illisible", c: "La bannière utilise une image de texte empêchant le redimensionnement. L'excès de gras et le texte justifié serré créent un 'mur de texte' difficile à parcourir." },
                        { f: "Libellés confus", c: "Le libellé 'Identifiant' est vague et les textes de remplissage inutiles compliquent la compréhension des informations requises." },
                        { f: "Mauvais retours", c: "Le message d'erreur générique ne précise pas quel champ est incorrect, et le formulaire se réinitialise sans confirmation." }
                    ]},
                    good: { title: "Corrections", items: [
                        { f: "Contenu statique et contrôlé", c: "Assurez-vous que le contenu promotionnel est statique. Permettez de naviguer à son propre rythme avec des boutons manuels et un indicateur de progression." },
                        { f: "Texte standard et espacement", c: "Utilisez du vrai texte au lieu d'images. Offrez un espacement généreux et n'utilisez le gras que pour les mots clés pour faciliter la lecture rapide." },
                        { f: "Libellés descriptifs", c: "Utilisez des libellés clairs comme 'Nom complet' et supprimez les textes de remplissage distrayants pour réduire l'effort de compréhension." },
                        { f: "Guidage clair des erreurs", c: "Pointez spécifiquement le champ à corriger et fournissez un message de succès permanent une fois la tâche terminée." }
                    ]}
                },
                userTitle: "Qui est impacté ?", userList: [
                    "**TDAH / Autisme :** Les parties mobiles et le gras incohérent agissent comme des distractions majeures, rendant difficile le maintien de l'attention.",
                    "**Dyslexie :** L'espacement serré et les polices rendant les lettres similaires identiques créent de graves barrières de lecture pour ces utilisateurs.",
                    "**Personnes sourdes :** Certaines personnes utilisant la langue des signes comme langue principale peuvent avoir un vocabulaire différent à l'écrit, rendant les instructions complexes plus difficiles à traiter.",
                    "**Troubles cognitifs :** Les carrousels rapides et les libellés vagues causent de la frustration lorsque les gens ne peuvent pas traiter l'information à temps."
                ]
            },
            nl: {
                inaccessible: "Niet Toegankelijk", accessible: "Toegankelijk", labTitle: "Digital Accessibility Empathy Lab", title: "Ervaring in lezen en begrijpen",
                name: { bad: "Identificatie", good: "Volledige Naam (verplicht)" }, code: { bad: "CODE", good: "Promotiecode" }, 
                btn: { bad: "OK", good: "Aanvraag Verzenden" }, promoPrefix: "NU AANMELDEN! 50% KORTING:",
                namePlaceholder: "Typ uw identificatie", codePlaceholder: "S5bd1L",
                instrTitle: "Instructies", guideTitle: "Stappenplan", prevAria: "Vorige dia", nextAria: "Volgende dia",
                indicator: "Dia {x} van {total}", tabTest: "Hoe te testen", tabUser: "Impact op gebruikers", tabIssues: "Problemen", tabRemediations: "Oplossingen",
                successMsg: "Uw aanvraag is succesvol verzonden", failMsg: "Formulier verzenden mislukt", errReqName: "Volledige naam is verplicht",
                instrSlides: [
                    "Stap 1: Vul het formulier in met de unieke alfanumerieke reeks die in de banner staat.",
                    "Stap 2: U ontvangt een geautomatiseerd e-mailbericht met het verzoek om onmiddellijke bevestiging van de gegevens.",
                    "Stap 3: U moet de elektronische ontvangst van dit bericht bevestigen om het voordeel te activeren.",
                    "Stap 4: U kunt het product retourneren binnen 15 dagen als u niet volledig tevreden bent."
                ],
                testSteps: ["Lees de instructies.", "Zoek de code.", "Test fouten.", "Vul in.", "Vergelijk."],
                critiques: {
                    bad: { title: "Wat is er mis?", items: [
                        { f: "Bewegende inhoud", c: "De knipperende, scrollende banner en automatisch verschuivende instructies leiden af, waardoor het moeilijk is om te focussen op het lezen." },
                        { f: "Ongecontroleerde carrousel", c: "De instructies wisselen automatisch zonder genoeg tijd te laten om te lezen, en er is geen manier om handmatig te stoppen of terug te gaan." },
                        { f: "Onleesbare opmaak", c: "De banner gebruikt een afbeelding van tekst wat vergroten verhindert. Te veel vetgedrukte woorden en strak uitgelijnde tekst maken het onoverzichtelijk." },
                        { f: "Vage labels", c: "Het label 'Identificatie' is vaag en placeholders met jargon maken het moeilijk om te begrijpen welke informatie precies nodig is." },
                        { f: "Slechte feedback", c: "De algemene foutmelding geeft niet aan welk veld fout is, en het formulier reset zonder duidelijke bevestiging bij succes." }
                    ]},
                    good: { title: "Oplossingen", items: [
                        { f: "Statische en gecontroleerde inhoud", c: "Zorg dat promotionele inhoud statisch is. Laat gebruikers instructies op hun eigen tempo bedienen met knoppen en een voortgangsindicator." },
                        { f: "Standaard tekst en spatiëring", c: "Gebruik echte tekst in plaats van afbeeldingen. Zorg voor ruime regelafstand en gebruik alleen vetgedrukte tekst voor echte kernwoorden." },
                        { f: "Beschrijvende labels", c: "Gebruik duidelijke labels zoals 'Volledige Naam' en verwijder verwarrende placeholder-tekst om de cognitieve inspanning te verminderen." },
                        { f: "Duidelijke fouthulp", c: "Wijs specifiek naar het veld dat correctie nodig heeft en toon een blijvende succesmelding wanneer de taak klaar is." }
                    ]}
                },
                userTitle: "Wie wordt beïnvloed?", userList: [
                    "**ADHD / Autisme:** Bewegende delen en willekeurig vetgedrukte tekst werken als grote afleiders, waardoor het erg moeilijk is om bij de les te blijven.",
                    "**Dyslexie:** Krappe spatiëring en lettertypen waarbij letters op elkaar lijken, vormen ernstige barrières voor deze gebruikers.",
                    "**Doven:** Mensen die gebarentaal als eerste taal gebruiken, kunnen een andere woordenschat hebben in geschreven tekst, waardoor complexe instructies lastiger zijn.",
                    "**Cognitieve beperking:** Snelle carrousels en vage labels zorgen voor frustratie wanneer mensen de informatie niet op tijd kunnen verwerken."
                ]
            },
            de: {
                inaccessible: "Nicht Barrierefrei", accessible: "Barrierefrei", labTitle: "Digitales Barrierefreiheits-Empathie-Labor", title: "Lese- und Verständnis-Erfahrung",
                name: { bad: "Identifikator", good: "Vollständiger Name (erforderlich)" }, code: { bad: "CODE", good: "Aktionscode" }, 
                btn: { bad: "OK", good: "Antrag Absenden" }, promoPrefix: "JETZT BEWERBEN! 50% RABATT:",
                namePlaceholder: "Geben Sie Ihren Identifikator ein", codePlaceholder: "S5bd1L",
                instrTitle: "Anleitung", guideTitle: "Schritt-für-Schritt-Anleitung", prevAria: "Vorherige Folie", nextAria: "Nächste Folie",
                indicator: "Folie {x} von {total}", tabTest: "Wie man testet", tabUser: "Betroffene Nutzer", tabIssues: "Probleme", tabRemediations: "Lösungen",
                successMsg: "Ihr Antrag wurde erfolgreich übermittelt", failMsg: "Senden fehlgeschlagen", errReqName: "Vollständiger Name ist erforderlich",
                instrSlides: [
                    "Schritt 1: Füllen Sie das Formular mit der in der Anzeige angegebenen alphanumerischen Sequenz aus.",
                    "Schritt 2: Sie erhalten eine automatisierte E-Mail mit der Bitte um sofortige Datenbestätigung.",
                    "Schritt 3: Sie müssen den elektronischen Empfang dieser Nachricht bestätigen, um den Vorteil zu aktivieren.",
                    "Schritt 4: Sie können das Produkt innerhalb von 15 Tagen zurückgeben, wenn Sie nicht zufrieden sind."
                ],
                testSteps: ["Anleitung lesen.", "Code suchen.", "Fehler prüfen.", "Ausfüllen.", "Modus wechseln."],
                critiques: {
                    bad: { title: "Was ist falsch?", items: [
                        { f: "Bewegte Inhalte", c: "Der blinkende, scrollende Banner und automatisch wechselnde Anleitungen lenken ab und erschweren die Konzentration auf den Text." },
                        { f: "Unkontrolliertes Karussell", c: "Die Anleitung wechselt automatisch, ohne genug Zeit zum Lesen zu lassen. Es gibt keine manuelle Steuerung." },
                        { f: "Unlesbare Formatierung", c: "Der Banner ist ein Bild, was Größenanpassungen verhindert. Zu viel Fettschrift und Blocksatz erzeugen eine schwer lesbare Textwüste." },
                        { f: "Vage Beschriftungen", c: "Der Begriff 'Identifikator' ist vage, und redundante Platzhalter erschweren das Verständnis der benötigten Informationen." },
                        { f: "Schlechtes Feedback", c: "Die Fehlermeldung nennt nicht das spezifische Feld, und das Formular wird bei Erfolg ohne dauerhafte Meldung zurückgesetzt." }
                    ]},
                    good: { title: "Lösungen", items: [
                        { f: "Statische und steuerbare Inhalte", c: "Sorgen Sie für statische Banner. Ermöglichen Sie das Navigieren durch Anleitungen im eigenen Tempo mit Tasten und Fortschrittsanzeige." },
                        { f: "Standardtext und Abstände", c: "Nutzen Sie echten Text statt Bilder. Bieten Sie großzügige Zeilenabstände und nutzen Sie Fettschrift nur für echte Schlüsselbegriffe." },
                        { f: "Klare Beschriftungen", c: "Nutzen Sie Begriffe wie 'Vollständiger Name' und entfernen Sie unnötige Platzhaltertexte, um die kognitive Last zu senken." },
                        { f: "Klare Fehlerführung", c: "Markieren Sie das exakte Feld für Korrekturen und zeigen Sie nach Abschluss eine dauerhafte Erfolgsmeldung an." }
                    ]}
                },
                userTitle: "Wer ist betroffen?", userList: [
                    "**ADHS / Autismus:** Bewegliche Teile und unnötige Fettschrift lenken massiv ab und erschweren das Dranbleiben an der Aufgabe.",
                    "**Legasthenie:** Enge Abstände und Schriftarten, die ähnliche Buchstaben identisch aussehen lassen, schaffen schwere Barrieren.",
                    "**Gehörlose Menschen:** Bei Menschen, die Gebärdensprache als Primärsprache nutzen, kann das Verständnis komplexer schriftsprachlicher Anweisungen mehr Zeit erfordern.",
                    "**Kognitive Einschränkung:** Schnelle Karussells und vage Begriffe führen zu Frustration, wenn Informationen nicht rechtzeitig verarbeitet werden können."
                ]
            }
        };

        let currentLang = 'en';
        let currentSlide = 0;
        let carouselInterval = null;

        function updateCarousel() {
            const isAcc = document.getElementById('modeToggle').checked;
            const t = translations[currentLang];
            const display = document.getElementById('txt-instructions');
            const indicator = document.getElementById('slide-indicator');
            let content = t.instrSlides[currentSlide];

            if (!isAcc) {
                // Random complex bolding for inaccessible carousel
                const words = content.split(' ');
                content = words.map((w, i) => i % 3 === 0 ? `<b>${w}</b>` : w).join(' ');
            } else {
                indicator.innerText = t.indicator.replace('{x}', currentSlide + 1).replace('{total}', t.instrSlides.length);
            }
            
            display.innerHTML = content;
        }

        function nextSlide() {
            const t = translations[currentLang];
            currentSlide = (currentSlide + 1) % t.instrSlides.length;
            updateCarousel();
        }

        function prevSlide() {
            const t = translations[currentLang];
            currentSlide = (currentSlide - 1 + t.instrSlides.length) % t.instrSlides.length;
            updateCarousel();
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang] || translations['en'];
            const isAcc = document.getElementById('modeToggle').checked;
            document.documentElement.lang = lang;

            document.getElementById('txt-lab-title').innerText = t.labTitle;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-inaccessible').innerText = t.inaccessible;
            document.getElementById('txt-accessible').innerText = t.accessible;
            document.getElementById('txt-label-name').innerText = isAcc ? t.name.good : t.name.bad;
            document.getElementById('txt-label-code').innerText = isAcc ? t.code.good : t.code.bad;
            document.getElementById('txt-btn').innerText = isAcc ? t.btn.good : t.btn.bad;
            document.getElementById('vague-error').innerText = t.failMsg;
            document.getElementById('txt-instr-title').innerText = t.instrTitle;
            document.getElementById('txt-guide-title').innerText = t.guideTitle;
            document.getElementById('txt-test-steps').innerHTML = (t.testSteps || []).map(s => `<li>${s}</li>`).join('');
            document.getElementById('tab-test').innerText = t.tabTest;
            document.getElementById('tab-user').innerText = t.tabUser;
            document.getElementById('tab-feedback').innerText = isAcc ? t.tabRemediations : t.tabIssues;

            const inpName = document.getElementById('inp-name');
            const inpCode = document.getElementById('inp-code');
            if (!isAcc) {
                inpName.placeholder = t.namePlaceholder;
                inpCode.placeholder = t.codePlaceholder;
            } else {
                inpName.placeholder = "";
                inpCode.placeholder = "";
            }

            document.getElementById('txt-user-content').innerHTML = `
                <h3 class="text-blue-400 font-bold uppercase mb-4 text-xs">${t.userTitle}</h3>
                <ul class="list-disc pl-5 space-y-3">${(t.userList||[]).map(li => `<li>${li.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')}</li>`).join('')}</ul>
            `;

            updateMode();
            
            document.querySelectorAll('.lang-btn').forEach(b => {
                b.classList.remove('bg-blue-600', 'text-white', 'bg-gray-200', 'text-gray-700');
                if (b.id === 'btn-' + lang) b.classList.add('bg-blue-600', 'text-white');
                else b.classList.add('bg-gray-200', 'text-gray-700');
            });
        }

        function validateForm() {
            const isAcc = document.getElementById('modeToggle').checked;
            const nameVal = document.getElementById('inp-name').value.trim();
            const codeVal = document.getElementById('inp-code').value.trim();
            const t = translations[currentLang];
            document.getElementById('vague-error').classList.add('hidden');
            document.getElementById('inp-name').classList.remove('input-error');
            document.getElementById('err-name').classList.add('hidden');

            if (isAcc) {
                if (!nameVal) {
                    document.getElementById('inp-name').classList.add('input-error');
                    document.getElementById('err-name').innerText = t.errReqName;
                    document.getElementById('err-name').classList.remove('hidden');
                    return;
                }
                document.getElementById('form-container').innerHTML = `<div class="bg-green-100 text-green-800 p-8 rounded-2xl border-2 border-green-200 text-center font-bold text-lg" role="status">${t.successMsg}</div>`;
            } else {
                if (!nameVal || codeVal !== 'S5bd1L') {
                    document.getElementById('vague-error').classList.remove('hidden');
                } else {
                    document.getElementById('inp-name').value = '';
                    document.getElementById('inp-code').value = '';
                }
            }
        }

        function handleModeToggle() {
            if (!document.getElementById('form-container')) location.reload();
            setLanguage(currentLang);
        }

        function updateMode() {
            const isAcc = document.getElementById('modeToggle').checked;
            const banner = document.getElementById('banner');
            const t = translations[currentLang] || translations['en'];
            const crit = isAcc ? t.critiques.good : t.critiques.bad;
            
            clearInterval(carouselInterval);
            if (!isAcc) {
                banner.innerHTML = `<img src="https://placehold.co/600x60/dc2626/ffffff/png?text=APPLY+NOW!+50%25+OFF+PROMO+CODE:+S5bd1L&font=playfair-display" alt="Promotion" class="promo-text-img">`;
                carouselInterval = setInterval(nextSlide, 2000);
                document.getElementById('carousel-controls').classList.add('hidden');
                document.getElementById('slide-indicator').classList.add('hidden');
            } else {
                banner.innerHTML = `<div class="text-white font-bold text-lg uppercase tracking-tight">${t.promoPrefix} REDUCE2026</div>`;
                document.getElementById('carousel-controls').classList.remove('hidden');
                document.getElementById('slide-indicator').classList.remove('hidden');
            }

            document.getElementById('bodyTag').className = isAcc ? "bg-gray-100 min-h-screen p-4 md:p-8 transition-colors duration-500 lab-ui-font accessible-mode" : "bg-gray-100 min-h-screen p-4 md:p-8 transition-colors duration-500 lab-ui-font inaccessible-mode";
            document.getElementById('txt-feedback-title').innerText = crit.title;
            document.getElementById('critiqueContent').innerHTML = (crit.items || []).map(i => `<div><span class="text-blue-400 font-bold block mb-1 uppercase text-[11px]">${i.f}</span><p class="text-white opacity-90">${i.c}</p></div>`).join('');
            updateCarousel();
        }

        function switchTab(tabId) {
            ['test', 'feedback', 'user'].forEach(id => {
                document.getElementById('panel-' + id).classList.toggle('hidden', id !== tabId);
                document.getElementById('tab-' + id).setAttribute('aria-selected', id === tabId);
            });
        }

        setLanguage('en');
        switchTab('test');
    </script>
</body>
</html>
