<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Experience - Digital Accessibility Empathy Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .transition-all { transition: all 0.3s ease; }

        /* --- READING BARRIERS (INACCESSIBLE MODE) --- */
        .inaccessible-mode { font-family: "Times New Roman", Times, serif !important; }
        
        /* 1. Distractor Animation (No Pause) */
        .promo-banner {
            width: 100%; height: 60px;
            background-color: #ef4444; color: white;
            display: flex; align-items: center; justify-content: center;
            font-weight: 900; overflow: hidden; position: relative;
            border-radius: 8px; margin-bottom: 20px;
        }
        .promo-text { white-space: nowrap; animation: slide 2s linear infinite; }
        @keyframes slide { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        
        .inaccessible-mode .promo-banner { animation: flash 0.5s step-end infinite; }
        @keyframes flash { 50% { background-color: #facc15; color: black; } }

        /* 2. Visual Crowding */
        .inaccessible-mode #txt-instructions {
            text-align: justify;
            line-height: 0.85 !important;
            letter-spacing: -0.06em !important;
            font-size: 13px;
        }
        .inaccessible-mode .cog-label { text-transform: uppercase !important; font-weight: 900 !important; }

        /* --- ACCESSIBLE MODE --- */
        .accessible-mode { font-family: ui-sans-serif, system-ui, sans-serif !important; }
        .accessible-mode .promo-banner { background-color: #1e40af; animation: none; }
        .accessible-mode .promo-text { animation-play-state: paused; }
        .accessible-mode.playing .promo-text { animation-play-state: running; }

        .accessible-mode #txt-instructions {
            text-align: left;
            line-height: 1.6;
            font-size: 15px;
        }
        .accessible-mode .cog-label { text-transform: none !important; font-weight: 600; }

        /* --- SHARED LAB UI (Exact match to Low Vision) --- */
        .info-panel-container { min-height: 380px !important; display: flex; flex-direction: column; }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ef4444; transition: .4s; border-radius: 28px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #15803d; }
        input:checked + .slider:before { transform: translateX(22px); }
        .tab-btn[aria-selected="true"] { background-color: #111827; color: #60a5fa; border-bottom: 2px solid #60a5fa; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8 font-sans transition-colors duration-500" id="bodyTag">

    <div class="max-w-6xl mx-auto bg-white shadow-2xl rounded-3xl overflow-hidden">
        <header class="bg-white border-b border-gray-100">
            <div class="p-6 flex flex-col md:flex-row justify-between items-center gap-6 border-b border-gray-50">
                <div id="txt-lab-title" class="text-xl md:text-2xl font-black tracking-tight uppercase" style="color: #008B63;">Digital Accessibility Empathy Lab</div>
                <img src="https://regine-lambrecht.github.io/color-contrast-checker-size-weight/images/banner.png" alt="Logo" class="h-12">
            </div>

            <nav class="p-4 flex flex-col gap-4">
                <div class="flex items-center justify-between gap-4 bg-gray-50 p-3 rounded-2xl border border-gray-200 w-full">
                    <div class="flex items-center gap-4">
                        <span id="txt-inaccessible" class="text-xs font-black uppercase tracking-widest text-red-600">Inaccessible</span>
                        <label class="switch">
                            <input type="checkbox" id="modeToggle" onchange="toggleMode()" role="switch">
                            <span class="slider"></span>
                        </label>
                        <span id="txt-accessible" class="text-xs font-black uppercase tracking-widest text-green-700">Accessible</span>
                    </div>
                    <div class="flex gap-2 text-[10px] font-bold">
                        <button onclick="setLanguage('en')" class="lang-btn px-2 py-1 rounded" id="btn-en">EN</button>
                        <button onclick="setLanguage('fr')" class="lang-btn px-2 py-1 rounded" id="btn-fr">FR</button>
                        <button onclick="setLanguage('nl')" class="lang-btn px-2 py-1 rounded" id="btn-nl">NL</button>
                        <button onclick="setLanguage('de')" class="lang-btn px-2 py-1 rounded" id="btn-de">DE</button>
                    </div>
                </div>
                <h1 id="txt-title" class="text-xl font-black text-gray-900 px-2 uppercase tracking-tighter">Reading Experience</h1>
            </nav>
        </header>

        <main class="p-6 md:p-10">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-16">
                
                <div class="lg:col-span-1 space-y-6">
                    <div class="promo-banner" id="banner">
                        <span class="promo-text" id="txt-promo">APPLY NOW! 50% OFF PROMO CODE: REDUCE2026</span>
                        <button id="pauseBtn" onclick="toggleAnimation()" class="hidden absolute right-2 bg-white text-black text-[9px] px-2 py-1 rounded font-bold uppercase">Pause</button>
                    </div>

                    <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 mb-6">
                        <h2 id="txt-instr-title" class="font-bold mb-2 uppercase text-[10px] text-blue-800">Instructions</h2>
                        <p id="txt-instructions"></p>
                    </div>

                    <div>
                        <label id="txt-label-name" class="cog-label text-xs block mb-1">Full Name</label>
                        <input type="text" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm">
                    </div>

                    <div>
                        <label id="txt-label-code" class="cog-label text-xs block mb-1">Promotional Code</label>
                        <input type="text" class="w-full border border-gray-300 p-2 rounded-lg bg-gray-50 text-sm">
                    </div>

                    <button id="txt-btn" class="w-full bg-blue-600 hover:bg-blue-800 text-white font-bold py-3 px-6 rounded-lg uppercase text-sm tracking-wide transition-colors">OK</button>
                </div>

                <div class="lg:col-span-3">
                    <div class="info-panel-container bg-gray-900 text-white rounded-2xl shadow-xl overflow-hidden h-full flex flex-col">
                        <div class="flex bg-gray-800 border-b border-gray-700">
                            <button id="tab-test" onclick="switchTab('test')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest" aria-selected="true">How to test</button>
                            <button id="tab-feedback" onclick="switchTab('feedback')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Issues</button>
                            <button id="tab-user" onclick="switchTab('user')" class="tab-btn px-6 py-4 text-xs font-black uppercase tracking-widest border-l border-gray-700" aria-selected="false">Impacted users</button>
                        </div>
                        <div id="panel-test" class="p-8 space-y-6 text-sm flex-grow">
                            <h3 id="txt-guide-title" class="text-blue-400 font-bold uppercase text-xs mb-2">Step-by-step guide</h3>
                            <ol id="txt-test-steps" class="list-decimal pl-5 space-y-4 opacity-95"></ol>
                        </div>
                        <div id="panel-feedback" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <h3 id="txt-feedback-title" class="text-blue-400 font-bold uppercase mb-6"></h3>
                            <div id="critiqueContent" class="space-y-6"></div>
                        </div>
                        <div id="panel-user" class="p-8 hidden text-sm flex-grow overflow-y-auto">
                            <div id="txt-user-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const translations = {
            en: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Digital Accessibility Empathy Lab", title: "Reading Experience",
                name: "Full Name", code: "Promotional Code", btn: "OK", promo: "APPLY NOW! 50% OFF PROMO CODE: REDUCE2026",
                instrTitle: "Instructions", guideTitle: "Step-by-step guide", pause: "Pause", play: "Play",
                tabTest: "How to test", tabUser: "Impacted users", tabIssues: "Issues", tabRemediations: "How to remediate",
                instr: {
                    bad: "It is an absolute prerequisite that the prospective applicant shall not initiate the submission protocol without the definitive acquisition of the alphanumeric promotional designator. Prior to completion, ensure that the nomenclature field is populated with the user's legal designation. Failure to synchronize the promotional code with the internal database renders the discount non-applicable and non-refundable.",
                    good: "To apply: 1. Enter your Full Name. 2. Enter the Promo Code from the banner (REDUCE2026). 3. Click OK."
                },
                testSteps: [
                    "Try to read the form and identify all instructions provided.",
                    "Zoom to 200%.",
                    "Observe the animation playing next to the form.",
                    "Identify the Promotional Code needed for the form.",
                    "Observe the effort needed to read the cramped 'Instructions' text.",
                    "Switch to the accessible version and repeat these steps."
                ],
                critiques: {
                    bad: { title: "What is wrong?", items: [
                        { f: "1. Distracting Movement", c: "Rapidly flashing or moving content with no way to stop it prevents users with ADHD or Autism from focusing on the task." },
                        { f: "2. Complex Language", c: "Legalistic jargon and passive voice increase the effort needed to understand simple instructions, excluding users with learning disabilities." },
                        { f: "3. Typographic Crowding", c: "Tight line spacing and serif fonts make word shapes harder to distinguish for dyslexic readers." }
                    ]},
                    good: { title: "How to remediate", items: [
                        { f: "1. Control Mechanisms", c: "Provide a 'Pause' button for moving content (WCAG 2.2.2). This allows users to eliminate distractions." },
                        { f: "2. Plain Language", c: "Use short, active sentences. Instructions should be clear and use common words." },
                        { f: "3. Legible Typography", c: "Use Sans-Serif fonts with at least 1.5 line height to aid scanning and word recognition." }
                    ]}
                },
                userTitle: "Who is impacted?", userList: [
                    "**ADHD / Autism:** Distractions make it hard to focus.",
                    "**Dyslexia:** Cramped text and serif fonts cause fatigue.",
                    "**Cognitive Impairment:** Complex jargon is confusing.",
                    "**Mobile Users:** Hard to navigate dense content."
                ]
            },
            fr: {
                inaccessible: "Inaccessible", accessible: "Accessible", labTitle: "Labo d'Empathie Accessibilité", title: "Expérience de Lecture",
                name: "Nom complet", code: "Code promotionnel", btn: "OK", promo: "POSTULEZ ! -50% CODE : REDUCE2026",
                instrTitle: "Instructions", guideTitle: "Guide étape par étape", pause: "Pause", play: "Lecture",
                tabTest: "Comment tester", tabUser: "Utilisateurs impactés", tabIssues: "Problèmes", tabRemediations: "Corrections",
                instr: {
                    bad: "Il est impératif que le postulant n'initie point le protocole de soumission sans l'acquisition préalable de l'identifiant promotionnel. La non-synchronisation rendra la réduction caduque.",
                    good: "Pour postuler : 1. Entrez votre nom. 2. Entrez le code promo (REDUCE2026). 3. Cliquez sur OK."
                },
                testSteps: ["Lisez le formulaire.", "Zoomez à 200%.", "Observez l'animation.", "Cherchez le code promo.", "Passez en mode accessible."],
                critiques: {
                    bad: { title: "Problèmes", items: [{ f: "Animation", c: "Absence de bouton pause." }, { f: "Langage", c: "Jargon trop complexe." }] },
                    good: { title: "Corrections", items: [{ f: "Bouton Pause", c: "Permettre l'arrêt de l'animation." }] }
                },
                userTitle: "Impact ?", userList: ["**TDAH / Autisme**", "**Dyslexie**"]
            },
            nl: {
                inaccessible: "Niet Toegankelijk", accessible: "Toegankelijk", labTitle: "Toegankelijkheid Lab", title: "Leeservaring",
                name: "Volledige Naam", code: "Promotiecode", btn: "OK", promo: "NU AANMELDEN! 50% KORTING: REDUCE2026",
                instrTitle: "Instructies", guideTitle: "Stappenplan", pause: "Pauze", play: "Start",
                tabTest: "Hoe te testen", tabUser: "Impact", tabIssues: "Problemen", tabRemediations: "Oplossingen",
                instr: {
                    bad: "Het is een absolute voorwaarde dat de aanvrager het indieningsprotocol niet start zonder de promotionele aanduiding.",
                    good: "Aanmelden: 1. Naam invullen. 2. Promocode invullen (REDUCE2026). 3. Klik op OK."
                },
                testSteps: ["Lees het formulier.", "Zoom naar 200%.", "Switch naar toegankelijk."],
                critiques: {
                    bad: { title: "Wat is er mis?", items: [{ f: "Afleiding", c: "Geen pauzeknop." }] },
                    good: { title: "Oplossingen", items: [{ f: "Helder taalgebruik", c: "Geen jargon." }] }
                },
                userTitle: "Wie?", userList: ["**ADHD / Autisme**", "**Dyslexie**"]
            },
            de: {
                inaccessible: "Nicht Barrierefrei", accessible: "Barrierefrei", labTitle: "Empathie-Labor", title: "Leseerfahrung",
                name: "Name", code: "Aktionscode", btn: "OK", promo: "JETZT BEWERBEN! 50% RABATT: REDUCE2026",
                instrTitle: "Anleitung", guideTitle: "Anleitung", pause: "Pause", play: "Start",
                tabTest: "Anleitung", tabUser: "Betroffene", tabIssues: "Probleme", tabRemediations: "Lösungen",
                instr: {
                    bad: "Es ist eine unabdingbare Voraussetzung, dass der Bewerber das Übermittlungsprotokoll nicht ohne Aktionskennzeichen initiiert.",
                    good: "Bewerben: 1. Namen eingeben. 2. Code eingeben (REDUCE2026). 3. OK klicken."
                },
                testSteps: ["Anleitung lesen.", "Zoom 200%.", "In den barrierefreien Modus wechseln."],
                critiques: {
                    bad: { title: "Probleme", items: [{ f: "Ablenkung", c: "Kein Pause-Button." }] },
                    good: { title: "Lösungen", items: [{ f: "Einfache Sprache", c: "Kurze Sätze." }] }
                },
                userTitle: "Wer?", userList: ["**ADHD / Autismus**", "**Legasthenie**"]
            }
        };

        let currentLang = 'en';
        let isPlaying = true;

        function toggleAnimation() {
            isPlaying = !isPlaying;
            const body = document.getElementById('bodyTag');
            const btn = document.getElementById('pauseBtn');
            const t = translations[currentLang];
            if (isPlaying) {
                body.classList.add('playing');
                btn.innerText = t.pause;
            } else {
                body.classList.remove('playing');
                btn.innerText = t.play;
            }
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang] || translations['en'];
            const isAcc = document.getElementById('modeToggle').checked;
            
            document.getElementById('txt-inaccessible').innerText = t.inaccessible;
            document.getElementById('txt-accessible').innerText = t.accessible;
            document.getElementById('txt-lab-title').innerText = t.labTitle;
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-label-name').innerText = t.name;
            document.getElementById('txt-label-code').innerText = t.code;
            document.getElementById('txt-btn').innerText = t.btn;
            document.getElementById('txt-promo').innerText = t.promo;
            document.getElementById('txt-instr-title').innerText = t.instrTitle;
            document.getElementById('txt-instructions').innerText = isAcc ? t.instr.good : t.instr.bad;
            document.getElementById('txt-guide-title').innerText = t.guideTitle;
            document.getElementById('txt-test-steps').innerHTML = t.testSteps.map(s => `<li>${s}</li>`).join('');
            document.getElementById('pauseBtn').innerText = isPlaying ? t.pause : t.play;
            
            document.getElementById('txt-user-content').innerHTML = `
                <h3 class="text-blue-400 font-bold uppercase mb-4 text-xs">${t.userTitle}</h3>
                <ul class="list-disc pl-5 space-y-3">${(t.userList||[]).map(li => `<li>${li.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>')}</li>`).join('')}</ul>
            `;

            updateMode();
            document.querySelectorAll('.lang-btn').forEach(b => {
                b.classList.remove('bg-blue-600', 'text-white', 'bg-gray-200', 'text-gray-700');
                if (b.id === 'btn-' + lang) b.classList.add('bg-blue-600', 'text-white');
                else b.classList.add('bg-gray-200', 'text-gray-700');
            });
        }

        function toggleMode() {
            setLanguage(currentLang);
        }

        function updateMode() {
            const isAcc = document.getElementById('modeToggle').checked;
            const t = translations[currentLang] || translations['en'];
            const crit = isAcc ? t.critiques.good : t.critiques.bad;
            
            document.getElementById('bodyTag').className = isAcc ? "bg-gray-100 min-h-screen p-4 md:p-8 font-sans accessible-mode" : "bg-gray-100 min-h-screen p-4 md:p-8 font-sans inaccessible-mode";
            if (isAcc && isPlaying) document.getElementById('bodyTag').classList.add('playing');
            
            document.getElementById('pauseBtn').classList.toggle('hidden', !isAcc);
            document.getElementById('tab-feedback').innerText = isAcc ? t.tabRemediations : t.tabIssues;
            document.getElementById('txt-feedback-title').innerText = crit.title;
            document.getElementById('critiqueContent').innerHTML = (crit.items || []).map(i => `<div><span class="text-blue-400 font-bold block mb-1 uppercase text-[11px]">${i.f}</span><p class="text-white opacity-90">${i.c}</p></div>`).join('');
        }

        function switchTab(tabId) {
            ['test', 'feedback', 'user'].forEach(id => {
                document.getElementById('panel-' + id).classList.toggle('hidden', id !== tabId);
                document.getElementById('tab-' + id).setAttribute('aria-selected', id === tabId);
            });
        }

        setLanguage('en');
        switchTab('test');
    </script>
</body>
</html>
